{% extends "base.html" %}

{# Page title #}

{% block page_title %}{{ picture.title }}{% endblock %}

{# Extra navigation options #}

{% block extra_nav %}
	{% with picture.previous as previous %}{% if previous %}
	<li><a href="{{ previous.get_absolute_url }}" title="{{ previous.title }}">&laquo; Previous</a></li>
	{% endif %}{% endwith %}
	{% with picture.next as next %}{% if next %}
	<li><a href="{{ next.get_absolute_url }}" title="{{ next.title }}">Next &raquo;</a></li>
	{% endif %}{% endwith %}
	<li><a href="{{ picture.get_apod_url }}" target="_blank">View on APOD</a></li>
{% endblock %}

{# Main block #}

{% block main %}

{# APOD block #}

<div id="apod">
	{# Image #}

	{% if picture.media_type == "IM" %}
		{% if picture.image %}
			<img src="{{ picture.image.url }}" width="{{ picture.image.width }}" height="{{ picture.image.height }}">
		{% else %}
			<div class="message loading" data-replace="{% url image_only picture.pk %}">
				<p>Downloading and processing picture...</p>
			</div>
		{% endif %}
	{% endif %}

	{# Videos #}

	{% if picture.media_type == "YT" %}
		<iframe class="youtube" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/{{ picture.video_id }}?rel=0&amp;showinfo=0&amp;modestbranding=1&amp;autohide=1&amp;wmode=opaque&amp;origin=apod.dev&amp;enablejsapi=1" frameborder="0"></iframe>
	{% endif %}

	{% if picture.media_type == "VI" %}
		<iframe class="vimeo" src="http://player.vimeo.com/video/{{ picture.video_id }}" width="640" height="385" frameborder="0"></iframe>
	{% endif %}
</div>

{# Details panel #}

<div class="details">
	<header>
		<h2>Details</h2>
	</header>

	<div class="panel">
		<div class="explanation">
			<h3>Explanation</h3>
			<p>{{ picture.explanation|safe }}</p>
		</div>

		<div class="extra">
			<h3>Published</h3>
			<p>{{ picture.publish_date.day }} <a href="{% url month picture.publish_date.year picture.publish_date.month %}">{{ picture.publish_date|date:'F' }}</a> <a href="{% url year picture.publish_date.year %}">{{ picture.publish_date.year }}</a></p>

			<h3>Credits</h3>
			<p>{{ picture.credits|safe }}</p>

			<h3>Keywords</h3>
			<p class="tags">
				{% for keyword in  picture.keywords.all %}
				<a href="#">{{ keyword }}</a>
				{% empty %}
				<p>None set</p>
				{% endfor %}
			</p>
		</div>
	</div>
</div>
{% endblock %}