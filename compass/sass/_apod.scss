// APOD

#apod {
	position: absolute;
	top: $titlebar-height + $titlebar-border;
	left: $toolbar-width + $toolbar-border;
	right: 0;
	bottom: 0;
	z-index: 1;
	overflow: auto;
	padding: $viewport-padding;
	text-align: center;
	
	// Viewport setup when js is on
	.js & {
		top: $titlebar-height + $titlebar-border + $viewport-padding;
		left: $viewport-padding + $toolbar-width + $toolbar-border;
		right: $viewport-padding;
		bottom: $viewport-padding;
		padding: 0;
		overflow: visible;
	}

	// Image

	img {
		@include box-shadow(black 0 0 5px);
		// Hide initially if js is on (for nice fade effect)
		.js & {
			position: absolute;
			opacity: 0;
			@include single-transition(opacity, 1s, ease-in);
			&.loaded {
				opacity: 1;
			}
		}
	}

	// Loader message
	// Should be hidden when js is enabled
	// This element is replaced by image when ready on the server

	p {
		.js & {
			display: none;
		}
	}

	// Videos

	iframe {
		background: black;
		@include box-shadow(black 0 0 10px);
		display: block;
		// Basic positioning when js is off
		margin: 80px auto 0 auto;
		.js & {
			display: none;
			// Better positioning is achieved via js
			position: absolute;
			margin: 0;
			top: 0;
			left: 0;
			&.loaded {
				display: block;
			}
		}
	}
}

// Details panel

.panel {
	position: fixed;
	top: $titlebar-height + $titlebar-border;
	bottom: 0;
	left: $toolbar-width + $toolbar-border;
	z-index: 3;
	width: 0;
	overflow: hidden;
	@include rgba-background(rgba(0,0,0,0.5));

	.js & {
		width: $panel-width;
		visibility: hidden;

		&.ready {
			width: 0;
			visibility: visible;

			& .inner-panel {
				margin-left: -$panel-width;
			}
		}
	}
	
	.inner-panel {
		padding: 20px;
		width: $panel-width - 40;
	}

	h2 {
		@include adjust-font-size-to(16px);
		@include margin-trailer();
		font-weight: normal;
	}

	h3 {
		@include adjust-font-size-to(14px);
		font-weight: normal;
		text-shadow: 0 1px 2px #000;
	}

	p {
		@include margin-trailer();
	}
}
